# MLflow Tag Keys Configuration
# Canonical tag names used throughout the pipeline
# Import this config to ensure consistency

schema_version: 1

# Grouping tags (for linking training and benchmark runs)
grouping:
  study_key_hash: "code.study_key_hash"
  trial_key_hash: "code.trial_key_hash"
  parent_run_id: "code.parent_run_id"
  study_family_hash: "code.study_family_hash"
  run_key_hash: "code.run_key_hash"
  group_id: "code.group_id"
  grouping_schema_version: "code.grouping_schema_version"

# Process/stage identification
process:
  stage: "code.stage"
  project: "code.project"
  backbone: "code.backbone"
  model: "code.model"
  run_type: "code.run_type"
  env: "code.env"  # Legacy; prefer storage_env / execution_platform
  storage_env: "code.storage_env"
  execution_platform: "code.execution_platform"
  created_by: "code.created_by"

# Training metadata
training:
  trained_on_full_data: "code.trained_on_full_data"
  source_training_run: "source_training_run"  # Used in benchmark runs
  refit: "code.refit"
  refit_has_validation: "code.refit_has_validation"
  interrupted: "code.interrupted"

# HPO-specific tags
hpo:
  trial_number: "code.hpo.trial_number"
  best_trial_run_id: "best_trial_run_id"
  best_trial_number: "best_trial_number"
  refit_planned: "code.refit_planned"

# Lineage tags (for tracking model origins)
lineage:
  source: "code.lineage.source"
  hpo_study_key_hash: "code.lineage.hpo_study_key_hash"
  hpo_trial_key_hash: "code.lineage.hpo_trial_key_hash"
  hpo_trial_run_id: "code.lineage.hpo_trial_run_id"
  hpo_refit_run_id: "code.lineage.hpo_refit_run_id"
  hpo_sweep_run_id: "code.lineage.hpo_sweep_run_id"
  parent_training_run_id: "code.lineage.parent_training_run_id"

# File path tags
paths:
  spec_fp: "code.spec_fp"
  exec_fp: "code.exec_fp"
  conv_fp: "code.conv_fp"
  output_dir: "code.output_dir"
  refit_protocol_fp: "code.refit_protocol_fp"

# Azure ML specific tags
azureml:
  run_type: "azureml.runType"
  sweep: "azureml.sweep"

# MLflow standard tags
mlflow:
  run_type: "mlflow.runType"
  parent_run_id: "mlflow.parentRunId"

# Legacy/other tags (non-namespaced or deprecated)
legacy:
  trial_number: "trial_number"  # Non-namespaced version
  trial_id: "code.trial_id"
  parent_training_id: "code.parent_training_id"
  variant: "code.variant"
  benchmark_config_hash: "code.benchmark_config_hash"
  run_id_prefix: "code.run_id_prefix"
